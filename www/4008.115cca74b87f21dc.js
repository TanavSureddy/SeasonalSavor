"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4008],{4008:(R,y,l)=>{l.r(y),l.d(y,{PaymentPageModule:()=>N});var h=l(1368),o=l(4716),i=l(2112),d=l(7632),v=l(1528),g=l(4276),e=l(4496),C=l(3496),f=l(8192),I=l(3976),F=l(7084);function P(a,p){1&a&&(e.I0R(0,"div"),e.OEk(1," Invalid card number "),e.C$Y())}function G(a,p){1&a&&(e.I0R(0,"div"),e.OEk(1," Card holder name is required "),e.C$Y())}function b(a,p){1&a&&(e.I0R(0,"div"),e.OEk(1," Invalid expiration date "),e.C$Y())}function Y(a,p){1&a&&(e.I0R(0,"div"),e.OEk(1," Invalid CVV "),e.C$Y())}const E=[{path:"",component:(()=>{class a{constructor(t,n,r,s,m,u,c,O){this.fb=t,this.router=n,this.alertController=r,this.cartServices=s,this.orderServices=m,this.authServices=u,this.toastController=c,this.dataSharingService=O}ngOnInit(){this.paymentForm=this.fb.group({cardNumber:["",[o.AQ.required,o.AQ.pattern("[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{4}")]],cardHolderName:["",o.AQ.required],expirationDate:["",[o.AQ.required,o.AQ.pattern("(0[1-9]|1[0-2])/([0-9]{2})")]],cvv:["",[o.AQ.required,o.AQ.pattern("[0-9]{3}")]]}),this.paymentForm?.get("cardNumber")?.valueChanges.subscribe(t=>{(4===t.length||9===t.length||14===t.length)&&this.paymentForm.patchValue({cardNumber:t+"-"})})}successToast(t){this.toastController.create({message:t,duration:3e3,position:"bottom",color:"success"}).then(n=>{n.present()})}errorToast(t){this.toastController.create({message:t,duration:3e3,position:"top",color:"danger"}).then(n=>{n.present()})}redirectToOrderSuccess(){var t=this;return(0,v.c)(function*(){const n=localStorage.getItem("userId");t.authServices.isAuthenticated()&&t.cartServices.cartItems.length>0?g.c.post(`https://api.jykrasolutions.com/api/user/placeOrder/${n}`,{cartItems:t.cartServices.getCartItems(),address:t.dataSharingService.getFormData(),orderTime:new Date}).then(r=>{t.dataSharingService.clearFormData(),t.orderServices.recentOrderDetails=[],t.successToast(r.data.message),t.orderServices.recentOrderDetails.push(r.data),t.cartServices.clearCart(),t.orderServices.getOrderDetails(),t.router.navigate(["/tabs/order-sucess"])}).catch(r=>{console.error("Error:",r)}):(t.errorToast("Please login to place order"),t.router.navigate(["/login"]))})()}static#e=this.\u0275fac=function(n){return new(n||a)(e.GI1(o.im),e.GI1(d.E5),e.GI1(i.iW),e.GI1(C.c),e.GI1(f.w),e.GI1(I.o),e.GI1(i.Gq),e.GI1(F.A))};static#t=this.\u0275cmp=e.In1({type:a,selectors:[["app-payment"]],decls:30,vars:9,consts:[[3,"translucent"],[3,"fullscreen"],[3,"formGroup"],["position","floating"],["type","text","formControlName","cardNumber","placeholder","1234-5678-1209-4567","area-label","Card Number"],[4,"ngIf"],["type","text","formControlName","cardHolderName","placeholder","Card Holder Name","area-label","Card Holder Name"],["type","text","formControlName","expirationDate","area-label","Expiration Date (MM/YY)"],["type","number","formControlName","cvv","placeholder","123","area-label","CVV"],["expand","block","type","submit",3,"disabled","click"]],template:function(n,r){if(1&n&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.OEk(3,"payment"),e.C$Y()()(),e.I0R(4,"ion-content",1)(5,"ion-card")(6,"ion-card-content")(7,"form",2)(8,"ion-item")(9,"ion-label",3),e.OEk(10,"Card Number"),e.C$Y(),e.wR5(11,"ion-input",4),e.C$Y(),e.yuY(12,P,2,0,"div",5),e.I0R(13,"ion-item")(14,"ion-label",3),e.OEk(15,"Card Holder Name"),e.C$Y(),e.wR5(16,"ion-input",6),e.C$Y(),e.yuY(17,G,2,0,"div",5),e.I0R(18,"ion-item")(19,"ion-label",3),e.OEk(20,"Expiration Date (MM/YY)"),e.C$Y(),e.wR5(21,"ion-input",7),e.C$Y(),e.yuY(22,b,2,0,"div",5),e.I0R(23,"ion-item")(24,"ion-label",3),e.OEk(25,"CVV"),e.C$Y(),e.wR5(26,"ion-input",8),e.C$Y(),e.yuY(27,Y,2,0,"div",5),e.I0R(28,"ion-button",9),e.qCj("click",function(){return r.redirectToOrderSuccess()}),e.OEk(29),e.C$Y()()()()()),2&n){let s,m,u,c;e.E7m("translucent",!0),e.yG2(4),e.E7m("fullscreen",!0),e.yG2(3),e.E7m("formGroup",r.paymentForm),e.yG2(5),e.E7m("ngIf",(null==r.paymentForm||null==(s=r.paymentForm.get("cardNumber"))?null:s.invalid)&&(null==r.paymentForm||null==(s=r.paymentForm.get("cardNumber"))?null:s.touched)),e.yG2(5),e.E7m("ngIf",(null==r.paymentForm||null==(m=r.paymentForm.get("cardHolderName"))?null:m.invalid)&&(null==r.paymentForm||null==(m=r.paymentForm.get("cardHolderName"))?null:m.touched)),e.yG2(5),e.E7m("ngIf",(null==r.paymentForm||null==(u=r.paymentForm.get("expirationDate"))?null:u.invalid)&&(null==r.paymentForm||null==(u=r.paymentForm.get("expirationDate"))?null:u.touched)),e.yG2(5),e.E7m("ngIf",(null==r.paymentForm||null==(c=r.paymentForm.get("cvv"))?null:c.invalid)&&(null==r.paymentForm||null==(c=r.paymentForm.get("cvv"))?null:c.touched)),e.yG2(),e.E7m("disabled",r.paymentForm.invalid),e.yG2(),e.oRS("Pay \u20b9",r.cartServices.totalCartValue,"")}},dependencies:[h.u_,o.sz,o.ue,o.u,i.sn,i.KC,i.Gg,i._i,i.wB,i.A5,i.Yb,i.QR,i.tM,i.Md,i.Ch,i.qG,o.uW,o.Wo],styles:["ion-card[_ngcontent-%COMP%]{margin:20px}ion-item[_ngcontent-%COMP%]{margin-bottom:15px}"]})}return a})()}];let S=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.a4G({type:a});static#r=this.\u0275inj=e.s3X({imports:[d.qQ.forChild(E),d.qQ]})}return a})(),N=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.a4G({type:a});static#r=this.\u0275inj=e.s3X({imports:[h.MD,o.y,i.wZ,S,o.sl]})}return a})()}}]);